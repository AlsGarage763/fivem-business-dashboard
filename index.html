<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FiveM Business Dashboard</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: #fff;
    margin: 0;
    padding: 0;
  }
  nav {
    background: rgba(0,0,0,0.3);
    display: flex;
    justify-content: center;
    gap: 20px;
    padding: 15px 0;
    position: sticky;
    top: 0;
    z-index: 10;
    flex-wrap: wrap;
  }
  nav button {
    background: transparent;
    border: 2px solid #fff;
    color: white;
    padding: 10px 20px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: 0.3s ease;
    white-space: nowrap;
  }
  nav button:hover, nav button.active {
    background: #fff;
    color: #764ba2;
  }
  section {
    max-width: 600px;
    margin: 40px auto;
    background: rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 25px 30px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.3);
  }
  h2 {
    margin-top: 0;
    margin-bottom: 20px;
    text-align: center;
  }
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
  }
  input, select, button {
    width: 100%;
    padding: 10px 15px;
    border-radius: 8px;
    border: none;
    margin-bottom: 15px;
    font-size: 16px;
  }
  button {
    background: #764ba2;
    color: white;
    font-weight: 700;
    border: none;
  }
  button:hover {
    background: #667eea;
  }
  .result {
    text-align: center;
    font-size: 20px;
    font-weight: 700;
    margin-top: 10px;
  }
  .log-list {
    max-height: 200px;
    overflow-y: auto;
    margin-top: 15px;
    border-top: 1px solid #ddd;
    padding-top: 10px;
    color: #eee;
  }
  .log-list p {
    font-size: 14px;
    margin: 4px 0;
  }
  .reset-btn {
    background: #ff4d4d;
    margin-top: 10px;
  }
</style>
</head>
<body>

<nav>
  <button id="nav-sales" class="active">Sales Log</button>
  <button id="nav-payroll">Employee Payroll</button>
  <button id="nav-profit">Business Profit</button>
  <button id="nav-expenses">Expenses</button>
</nav>

<!-- SALES LOG SECTION -->
<section id="sales-section">
  <h2>Sales Log</h2>
  <label for="sales-date">Date</label>
  <input type="date" id="sales-date" />
  <label for="sales-gross">Gross Sales ($)</label>
  <input type="number" id="sales-gross" min="0" step="0.01" placeholder="Enter gross sales" />
  <label for="sales-tax">Tax Rate (%)</label>
  <input type="number" id="sales-tax" min="0" max="100" step="0.01" placeholder="Enter tax rate %" />
  <button id="add-sale-btn">Add Sales Record</button>

  <div class="log-list" id="sales-log-list">
    <h4>Sales Records</h4>
  </div>
  <button id="reset-sales" class="reset-btn">Reset Sales Records</button>
</section>

<!-- EMPLOYEE PAYROLL SECTION -->
<section id="payroll-section" style="display:none;">
  <h2>Employee Payroll</h2>
  <label for="payroll-date">Date</label>
  <input type="date" id="payroll-date" />
  
  <label for="employee-select">Employee</label>
  <select id="employee-select">
    <option value="cuddy">Cuddy</option>
    <option value="haze">Haze</option>
    <option value="dante">Dante Vincenzo</option>
  </select>

  <label for="logs-worked">Number of Logs Worked</label>
  <input type="number" id="logs-worked" min="0" placeholder="Enter logs worked" />
  
  <button id="add-payroll-btn">Add Payroll Record</button>

  <div class="log-list" id="payroll-log-list">
    <h4>Payroll Records</h4>
  </div>
  <button id="reset-payroll" class="reset-btn">Reset Payroll Records</button>
</section>

<!-- BUSINESS PROFIT SECTION -->
<section id="profit-section" style="display:none;">
  <h2>Business Profit</h2>
  <button id="calculate-profit-btn">Calculate Profit</button>
  <div class="result" id="profit-result"></div>

  <h4>Profit History</h4>
  <div class="log-list" id="profit-log-list"></div>
  <button id="reset-profit" class="reset-btn">Reset Profit History</button>
</section>

<!-- EXPENSES SECTION -->
<section id="expenses-section" style="display:none;">
  <h2>Expenses</h2>
  <label for="expense-date">Date</label>
  <input type="date" id="expense-date" />
  <label for="expense-category">Category</label>
  <input type="text" id="expense-category" placeholder="e.g. Materials, Rent" />
  <label for="expense-amount">Amount ($)</label>
  <input type="number" id="expense-amount" min="0" step="0.01" placeholder="Enter amount spent" />
  <button id="add-expense-btn">Add Expense</button>

  <div class="log-list" id="expense-log-list">
    <h4>Expense Records</h4>
  </div>

  <div class="result" id="monthly-expense-total"></div>
  <button id="reset-expenses" class="reset-btn">Reset Expense Records</button>
</section>

<script>
// Constants
const PAY_PER_LOG = 500;

// Utility functions for localStorage
function getLocalData(key) {
  return JSON.parse(localStorage.getItem(key)) || [];
}

function setLocalData(key, data) {
  localStorage.setItem(key, JSON.stringify(data));
}

// NAVIGATION
const navSales = document.getElementById('nav-sales');
const navPayroll = document.getElementById('nav-payroll');
const navProfit = document.getElementById('nav-profit');
const navExpenses = document.getElementById('nav-expenses');

const salesSection = document.getElementById('sales-section');
const payrollSection = document.getElementById('payroll-section');
const profitSection = document.getElementById('profit-section');
const expensesSection = document.getElementById('expenses-section');

function setActiveNav(button) {
  [navSales, navPayroll, navProfit, navExpenses].forEach(btn => btn.classList.remove('active'));
  button.classList.add('active');
}

navSales.onclick = () => {
  setActiveNav(navSales);
  salesSection.style.display = 'block';
  payrollSection.style.display = 'none';
  profitSection.style.display = 'none';
  expensesSection.style.display = 'none';
  renderSalesLogs();
};

navPayroll.onclick = () => {
  setActiveNav(navPayroll);
  salesSection.style.display = 'none';
  payrollSection.style.display = 'block';
  profitSection.style.display = 'none';
  expensesSection.style.display = 'none';
  renderPayrollLogs();
};

navProfit.onclick = () => {
  setActiveNav(navProfit);
  salesSection.style.display = 'none';
  payrollSection.style.display = 'none';
  profitSection.style.display = 'block';
  expensesSection.style.display = 'none';
  renderProfitLogs();
};

navExpenses.onclick = () => {
  setActiveNav(navExpenses);
  salesSection.style.display = 'none';
  payrollSection.style.display = 'none';
  profitSection.style.display = 'none';
  expensesSection.style.display = 'block';
  renderExpenseLogs();
};

// SALES LOG FUNCTIONS
const salesDateInput = document.getElementById('sales-date');
const salesGrossInput = document.getElementById('sales-gross');
const salesTaxInput = document.getElementById('sales-tax');
const addSaleBtn = document.getElementById('add-sale-btn');
const salesLogList = document.getElementById('sales-log-list');
const resetSalesBtn = document.getElementById('reset-sales');

addSaleBtn.onclick = () => {
  const date = salesDateInput.value;
  const gross = parseFloat(salesGrossInput.value);
  const taxRate = parseFloat(salesTaxInput.value);
  if (!date || isNaN(gross) || isNaN(taxRate)) {
    alert('Please enter valid date, gross sales, and tax rate.');
    return;
  }
  const sales = getLocalData('salesLogs');
  sales.push({ date, gross, taxRate });
  setLocalData('salesLogs', sales);
  salesDateInput.value = '';
  salesGrossInput.value = '';
  salesTaxInput.value = '';
  renderSalesLogs();
};

function renderSalesLogs() {
  const sales = getLocalData('salesLogs');
  salesLogList.innerHTML = '<h4>Sales Records</h4>';
  if (sales.length === 0) {
    salesLogList.innerHTML += '<p>No sales records yet.</p>';
    return;
  }
  sales.forEach((sale, i) => {
    salesLogList.innerHTML += `<p>${sale.date} - Gross: $${sale.gross.toFixed(2)}, Tax Rate: ${sale.taxRate}%</p>`;
  });
}

resetSalesBtn.onclick = () => {
  if (confirm('Are you sure you want to reset all sales records?')) {
    localStorage.removeItem('salesLogs');
    renderSalesLogs();
  }
};

// PAYROLL FUNCTIONS
const payrollDateInput = document.getElementById('payroll-date');
const employeeSelect = document.getElementById('employee-select');
const logsWorkedInput = document.getElementById('logs-worked');
const addPayrollBtn = document.getElementById('add-payroll-btn');
const payrollLogList = document.getElementById('payroll-log-list');
const resetPayrollBtn = document.getElementById('reset-payroll');

addPayrollBtn.onclick = () => {
  const date = payrollDateInput.value;
  const employee = employeeSelect.options[employeeSelect.selectedIndex].text;
  const logs = parseInt(logsWorkedInput.value, 10);
  if (!date || !employee || isNaN(logs)) {
    alert('Please enter valid date, select employee, and logs worked.');
    return;
  }
  const payrolls = getLocalData('payrollLogs');
  payrolls.push({ date, employee, logs });
  setLocalData('payrollLogs', payrolls);
  payrollDateInput.value = '';
  logsWorkedInput.value = '';
  renderPayrollLogs();
};

function renderPayrollLogs() {
  const payrolls = getLocalData('payrollLogs');
  payrollLogList.innerHTML = '<h4>Payroll Records</h4>';
  if (payrolls.length === 0) {
    payrollLogList.innerHTML += '<p>No payroll records yet.</p>';
    return;
  }
  payrolls.forEach((p, i) => {
    payrollLogList.innerHTML += `<p>${p.date} - ${p.employee} worked ${p.logs} logs ($${(p.logs * PAY_PER_LOG).toFixed(2)})</p>`;
  });
}

resetPayrollBtn.onclick = () => {
  if (confirm('Are you sure you want to reset all payroll records?')) {
    localStorage.removeItem('payrollLogs');
    renderPayrollLogs();
  }
};

// EXPENSES FUNCTIONS
const expenseDateInput = document.getElementById('expense-date');
const expenseCategoryInput = document.getElementById('expense-category');
const expenseAmountInput = document.getElementById('expense-amount');
const addExpenseBtn = document.getElementById('add-expense-btn');
const expenseLogList = document.getElementById('expense-log-list');
const monthlyExpenseTotal = document.getElementById('monthly-expense-total');
const resetExpensesBtn = document.getElementById('reset-expenses');

addExpenseBtn.onclick = () => {
  const date = expenseDateInput.value;
  const category = expenseCategoryInput.value.trim();
  const amount = parseFloat(expenseAmountInput.value);
  if (!date || !category || isNaN(amount)) {
    alert('Please enter valid date, category, and amount.');
    return;
  }
  const expenses = getLocalData('expenseLogs');
  expenses.push({ date, category, amount });
  setLocalData('expenseLogs', expenses);
  expenseDateInput.value = '';
  expenseCategoryInput.value = '';
  expenseAmountInput.value = '';
  renderExpenseLogs();
};

function renderExpenseLogs() {
  const expenses = getLocalData('expenseLogs');
  expenseLogList.innerHTML = '<h4>Expense Records</h4>';
  if (expenses.length === 0) {
    expenseLogList.innerHTML += '<p>No expense records yet.</p>';
    monthlyExpenseTotal.innerHTML = '';
    return;
  }
  // Sort expenses by date descending
  expenses.sort((a,b) => b.date.localeCompare(a.date));
  expenses.forEach((e, i) => {
    expenseLogList.innerHTML += `<p>${e.date} - ${e.category}: $${e.amount.toFixed(2)}</p>`;
  });

  // Calculate total expenses for current month
  const today = new Date();
  const currentMonth = today.toISOString().slice(0,7); // "YYYY-MM"
  let monthTotal = 0;
  expenses.forEach(e => {
    if (e.date.startsWith(currentMonth)) {
      monthTotal += e.amount;
    }
  });

  monthlyExpenseTotal.innerHTML = `<p><strong>Total Expenses for ${currentMonth}:</strong> $${monthTotal.toFixed(2)}</p>`;
}

resetExpensesBtn.onclick = () => {
  if (confirm('Are you sure you want to reset all expense records?')) {
    localStorage.removeItem('expenseLogs');
    renderExpenseLogs();
  }
};

// BUSINESS PROFIT FUNCTIONS
const calculateProfitBtn = document.getElementById('calculate-profit-btn');
const profitResult = document.getElementById('profit-result');
const profitLogList = document.getElementById('profit-log-list');
const resetProfitBtn = document.getElementById('reset-profit');

function calculateBusinessProfit() {
  const sales = getLocalData('salesLogs');
  const payrolls = getLocalData('payrollLogs');
  const expenses = getLocalData('expenseLogs');

  if (sales.length === 0) {
    alert('No sales records to calculate profit.');
    return;
  }

  // Sum net sales after taxes
  let totalNetProfit = 0;
  sales.forEach(sale => {
    const net = sale.gross * (1 - sale.taxRate / 100);
    totalNetProfit += net;
  });

  // Sum total salary owed
  let totalSalary = 0;
  payrolls.forEach(payroll => {
    totalSalary += payroll.logs * PAY_PER_LOG;
  });

  // Sum total expenses (all expenses)
  let totalExpenses = 0;
  expenses.forEach(exp => {
    totalExpenses += exp.amount;
  });

  // Calculate final business profit
  const finalProfit = totalNetProfit - totalSalary - totalExpenses;

  // Save profit record with today's date
  const today = new Date().toISOString().split('T')[0];
  const profitHistory = getLocalData('profitHistory');
  profitHistory.push({ date: today, netProfit: totalNetProfit, totalSalary, totalExpenses, finalProfit });
  setLocalData('profitHistory', profitHistory);

  // Display results
  profitResult.innerHTML = `
    <p>Total Net Profit (after taxes): <strong>$${totalNetProfit.toFixed(2)}</strong></p>
    <p>Total Salary Owed: <strong>$${totalSalary.toFixed(2)}</strong></p>
    <p>Total Expenses: <strong>$${totalExpenses.toFixed(2)}</strong></p>
    <p><strong>Final Business Profit:</strong> $${finalProfit.toFixed(2)}</p>
  `;

  renderProfitLogs();
}

function renderProfitLogs() {
  const profits = getLocalData('profitHistory');
  profitLogList.innerHTML = '<h4>Profit History</h4>';
  if (profits.length === 0) {
    profitLogList.innerHTML += '<p>No profit records yet.</p>';
    return;
  }
  profits.forEach(p => {
    profitLogList.innerHTML += `<p><strong>${p.date}</strong> â€” Net Profit: $${p.netProfit.toFixed(2)}, Salary: $${p.totalSalary.toFixed(2)}, Expenses: $${p.totalExpenses.toFixed(2)}, Final Profit: $${p.finalProfit.toFixed(2)}</p>`;
  });
}

calculateProfitBtn.onclick = calculateBusinessProfit;

resetProfitBtn.onclick = () => {
  if (confirm('Are you sure you want to reset profit history?')) {
    localStorage.removeItem('profitHistory');
    profitResult.innerHTML = '';
    renderProfitLogs();
  }
};

// INITIAL RENDER CALLS
renderSalesLogs();
renderPayrollLogs();
renderProfitLogs();
renderExpenseLogs();

</script>

</body>
</html>






