<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Business Dashboard</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: #f5f7fa;
    color: #333;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 20px;
  }

  /* Container */
  #login-container, #dashboard {
    background: white;
    width: 100%;
    max-width: 960px;
    border-radius: 12px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    padding: 30px 40px;
  }

  h2 {
    font-weight: 600;
    margin-bottom: 20px;
    color: #222;
  }

  /* Login */
  #login-container input[type=text],
  #login-container input[type=password] {
    width: 100%;
    padding: 14px 16px;
    border: 1.5px solid #ddd;
    border-radius: 8px;
    font-size: 16px;
    transition: border-color 0.3s ease;
  }
  #login-container input[type=text]:focus,
  #login-container input[type=password]:focus {
    outline: none;
    border-color: #007bff;
  }
  #login-container button {
    width: 100%;
    padding: 14px;
    background: #007bff;
    border: none;
    border-radius: 8px;
    color: white;
    font-size: 18px;
    font-weight: 600;
    margin-top: 15px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  #login-container button:hover {
    background: #0056b3;
  }
  #login-error {
    margin-top: 12px;
    color: #e03e3e;
    font-weight: 600;
  }

  /* Nav */
  nav {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 30px;
    border-bottom: 2px solid #eee;
    padding-bottom: 10px;
  }
  nav button {
    background: none;
    border: none;
    padding: 10px 22px;
    font-weight: 600;
    font-size: 16px;
    border-radius: 8px;
    color: #555;
    cursor: pointer;
    transition: background-color 0.25s ease, color 0.25s ease;
  }
  nav button.active,
  nav button:hover {
    background: #007bff;
    color: white;
  }
  #logout-btn {
    margin-left: auto;
    background: #dc3545 !important;
    color: white !important;
  }
  #logout-btn:hover {
    background: #b52b3a !important;
  }

  /* Tabs */
  .tab {
    display: none;
  }
  .tab.active {
    display: block;
  }

  /* Forms */
  form > div {
    margin-bottom: 15px;
  }
  label {
    font-weight: 600;
    display: block;
    margin-bottom: 6px;
  }
  input[type=text], input[type=number], input[type=date], select, textarea {
    width: 100%;
    padding: 12px 14px;
    font-size: 15px;
    border-radius: 8px;
    border: 1.5px solid #ccc;
    transition: border-color 0.3s ease;
    font-family: 'Inter', sans-serif;
  }
  input[type=text]:focus, input[type=number]:focus, input[type=date]:focus, select:focus, textarea:focus {
    border-color: #007bff;
    outline: none;
  }
  textarea {
    resize: vertical;
  }
  button.submit-btn {
    background: #28a745;
    border: none;
    padding: 14px 24px;
    font-weight: 700;
    font-size: 16px;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button.submit-btn:hover {
    background: #1e7e34;
  }

  /* Tables */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 12px;
    font-size: 15px;
  }
  th, td {
    padding: 12px 14px;
    border-bottom: 1.5px solid #eee;
    text-align: left;
  }
  th {
    background: #007bff;
    color: white;
    font-weight: 700;
    border-radius: 6px 6px 0 0;
  }
  tbody tr:hover {
    background-color: #f1faff;
  }

  /* Small buttons for editing/removing */
  button.edit-btn, button.delete-btn {
    border: none;
    padding: 6px 10px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    font-size: 14px;
    margin-right: 6px;
    transition: background-color 0.2s ease;
  }
  button.edit-btn {
    background: #ffc107;
    color: #333;
  }
  button.edit-btn:hover {
    background: #e0a800;
  }
  button.delete-btn {
    background: #dc3545;
    color: white;
  }
  button.delete-btn:hover {
    background: #b52b3a;
  }

  /* Responsive */
  @media (max-width: 600px) {
    nav {
      flex-direction: column;
    }
    nav button {
      width: 100%;
    }
  }

  /* Profit display styling */
  .profit-summary {
    background: #e9f7ef;
    border: 2px solid #28a745;
    border-radius: 12px;
    padding: 20px;
    font-size: 18px;
    font-weight: 700;
    color: #155724;
    max-width: 600px;
  }
</style>
</head>
<body>

<div id="login-container">
  <h2>Owner Login</h2>
  <input type="text" id="username" placeholder="Username" autocomplete="off" />
  <input type="password" id="password" placeholder="Password" autocomplete="off" />
  <button id="login-btn">Login</button>
  <p id="login-error"></p>
</div>

<div id="dashboard" class="hidden" aria-live="polite">

  <nav aria-label="Main Navigation">
    <button data-tab="sales-tab" class="active" aria-controls="sales-tab" aria-selected="true" role="tab">Sales</button>
    <button data-tab="employees-tab" aria-controls="employees-tab" role="tab" aria-selected="false">Employees</button>
    <button data-tab="expenses-tab" aria-controls="expenses-tab" role="tab" aria-selected="false">Expenses</button>
    <button data-tab="payroll-tab" aria-controls="payroll-tab" role="tab" aria-selected="false">Payroll</button>
    <button data-tab="profit-tab" aria-controls="profit-tab" role="tab" aria-selected="false">Profit</button>
    <button id="logout-btn" style="margin-left:auto;">Logout</button>
  </nav>

  <!-- Sales Tab -->
  <section id="sales-tab" class="tab active" role="tabpanel" tabindex="0" aria-labelledby="sales-tab-btn">
    <h2>Sales</h2>
    <form id="sales-form" aria-label="Add Sales Record">
      <div>
        <label for="sales-month">Month</label>
        <input type="month" id="sales-month" required />
      </div>
      <div>
        <label for="sales-amount">Amount ($)</label>
        <input type="number" id="sales-amount" min="0" step="0.01" required />
      </div>
      <button type="submit" class="submit-btn">Add / Update Sale</button>
    </form>

    <table aria-label="Sales Records">
      <thead>
        <tr><th>Month</th><th>Amount ($)</th><th>Actions</th></tr>
      </thead>
      <tbody id="sales-table-body"></tbody>
    </table>
  </section>

  <!-- Employees Tab -->
  <section id="employees-tab" class="tab" role="tabpanel" tabindex="0" aria-labelledby="employees-tab-btn">
    <h2>Employees</h2>
    <form id="employees-form" aria-label="Add Employee">
      <div>
        <label for="emp-name">Name</label>
        <input type="text" id="emp-name" placeholder="Full Name" required />
      </div>
      <div>
        <label for="emp-gender">Gender</label>
        <select id="emp-gender" required>
          <option value="" disabled selected>Select gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div>
        <label for="emp-hiredate">Hire Date</label>
        <input type="date" id="emp-hiredate" required />
      </div>
      <div>
        <label for="emp-logs">Work Logs (Number of logs worked)</label>
        <input type="number" id="emp-logs" min="0" step="1" value="0" required />
      </div>
      <button type="submit" class="submit-btn">Add / Update Employee</button>
    </form>

    <table aria-label="Employees List">
      <thead>
        <tr><th>Name</th><th>Gender</th><th>Hire Date</th><th>Logs</th><th>Actions</th></tr>
      </thead>
      <tbody id="employees-table-body"></tbody>
    </table>
  </section>

  <!-- Expenses Tab -->
  <section id="expenses-tab" class="tab" role="tabpanel" tabindex="0" aria-labelledby="expenses-tab-btn">
    <h2>Expenses</h2>
    <form id="expenses-form" aria-label="Add Expense">
      <div>
        <label for="expense-date">Date</label>
        <input type="date" id="expense-date" required />
      </div>
      <div>
        <label for="expense-amount">Amount ($)</label>
        <input type="number" id="expense-amount" min="0" step="0.01" required />
      </div>
      <div>
        <label for="expense-desc">Description</label>
        <textarea id="expense-desc" rows="2" placeholder="What was this expense for?" required></textarea>
      </div>
      <button type="submit" class="submit-btn">Add Expense</button>
    </form>

    <table aria-label="Expenses List">
      <thead>
        <tr><th>Date</th><th>Amount ($)</th><th>Description</th><th>Actions</th></tr>
      </thead>
      <tbody id="expenses-table-body"></tbody>
    </table>
  </section>

  <!-- Payroll Tab -->
  <section id="payroll-tab" class="tab" role="tabpanel" tabindex="0" aria-labelledby="payroll-tab-btn">
    <h2>Payroll</h2>
    <table aria-label="Payroll Details">
      <thead>
        <tr><th>Name</th><th>Logs</th><th>Pay per Log ($)</th><th>Total Pay ($)</th></tr>
      </thead>
      <tbody id="payroll-table-body"></tbody>
      <tfoot>
        <tr style="font-weight: 700; border-top: 2px solid #007bff;">
          <td colspan="3" style="text-align:right;">Total Payroll</td>
          <td id="payroll-total">$0.00</td>
        </tr>
      </tfoot>
    </table>
  </section>

  <!-- Profit Tab -->
  <section id="profit-tab" class="tab" role="tabpanel" tabindex="0" aria-labelledby="profit-tab-btn">
    <h2>Profit Summary</h2>
    <div class="profit-summary" aria-live="polite">
      <p><strong>Gross Revenue (Total Sales):</strong> $<span id="profit-gross">0.00</span></p>
      <p><strong>Total Expenses:</strong> $<span id="profit-expenses">0.00</span></p>
      <p><strong>Total Payroll:</strong> $<span id="profit-payroll">0.00</span></p>
      <p><strong>Tax (20% of Revenue):</strong> $<span id="profit-tax">0.00</span></p>
      <hr />
      <p style="font-size: 22px; margin-top: 15px;"><strong>Net Profit:</strong> $<span id="profit-net">0.00</span></p>
    </div>
  </section>

</div>

<script>
(() => {
  // Login logic
  const loginContainer = document.getElementById('login-container');
  const dashboard = document.getElementById('dashboard');
  const loginBtn = document.getElementById('login-btn');
  const logoutBtn = document.getElementById('logout-btn');
  const loginError = document.getElementById('login-error');

  const USERNAME = 'admin';
  const PASSWORD = "Al'sOwners123";

  // Tabs nav buttons
  const navButtons = [...document.querySelectorAll('nav button[data-tab]')];
  const tabs = navButtons.map(btn => document.getElementById(btn.dataset.tab));

  // Forms & table bodies
  const salesForm = document.getElementById('sales-form');
  const salesTableBody = document.getElementById('sales-table-body');

  const employeesForm = document.getElementById('employees-form');
  const employeesTableBody = document.getElementById('employees-table-body');

  const expensesForm = document.getElementById('expenses-form');
  const expensesTableBody = document.getElementById('expenses-table-body');

  const payrollTableBody = document.getElementById('payroll-table-body');
  const payrollTotalElem = document.getElementById('payroll-total');

  const profitGrossElem = document.getElementById('profit-gross');
  const profitExpensesElem = document.getElementById('profit-expenses');
  const profitPayrollElem = document.getElementById('profit-payroll');
  const profitTaxElem = document.getElementById('profit-tax');
  const profitNetElem = document.getElementById('profit-net');

  // Constants
  const TAX_RATE = 0.2;

  // Storage keys
  const STORAGE_KEYS = {
    sales: 'business_dashboard_sales',
    employees: 'business_dashboard_employees',
    expenses: 'business_dashboard_expenses',
    loggedIn: 'business_dashboard_loggedIn',
  };

  // Utility: format number to 2 decimals
  function formatMoney(num) {
    return Number(num).toFixed(2);
  }

  // STORAGE helpers
  function loadData(key) {
    const data = localStorage.getItem(key);
    return data ? JSON.parse(data) : [];
  }
  function saveData(key, data) {
    localStorage.setItem(key, JSON.stringify(data));
  }

  // LOGIN check on load
  function checkLogin() {
    if(localStorage.getItem(STORAGE_KEYS.loggedIn) === 'true') {
      showDashboard();
    } else {
      showLogin();
    }
  }

  function showLogin() {
    loginContainer.classList.remove('hidden');
    dashboard.classList.add('hidden');
  }
  function showDashboard() {
    loginContainer.classList.add('hidden');
    dashboard.classList.remove('hidden');
    loadAllData();
    updatePayroll();
    updateProfit();
  }

  loginBtn.addEventListener('click', () => {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;

    if(username === USERNAME && password === PASSWORD) {
      localStorage.setItem(STORAGE_KEYS.loggedIn, 'true');
      loginError.textContent = '';
      showDashboard();
    } else {
      loginError.textContent = 'Invalid username or password.';
    }
  });

  logoutBtn.addEventListener('click', () => {
    localStorage.removeItem(STORAGE_KEYS.loggedIn);
    showLogin();
  });

  // Tab switching
  navButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      navButtons.forEach(b => {
        b.classList.remove('active');
        b.setAttribute('aria-selected', 'false');
      });
      btn.classList.add('active');
      btn.setAttribute('aria-selected', 'true');
      tabs.forEach(tab => tab.classList.remove('active'));
      document.getElementById(btn.dataset.tab).classList.add('active');
    });
  });

  // --- SALES ---
  let sales = [];

  function renderSales() {
    salesTableBody.innerHTML = '';
    sales.sort((a,b) => a.month.localeCompare(b.month)).forEach(({month, amount}) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${month}</td>
        <td>$${formatMoney(amount)}</td>
        <td>
          <button class="edit-btn" aria-label="Edit sale for ${month}">Edit</button>
          <button class="delete-btn" aria-label="Delete sale for ${month}">Delete</button>
        </td>
      `;
      const [editBtn, deleteBtn] = tr.querySelectorAll('button');
      editBtn.onclick = () => {
        document.getElementById('sales-month').value = month;
        document.getElementById('sales-amount').value = amount;
      };
      deleteBtn.onclick = () => {
        if(confirm(`Delete sale record for ${month}?`)) {
          sales = sales.filter(s => s.month !== month);
          saveData(STORAGE_KEYS.sales, sales);
          renderSales();
          updateProfit();
        }
      };
      salesTableBody.appendChild(tr);
    });
  }

  salesForm.addEventListener('submit', e => {
    e.preventDefault();
    const month = document.getElementById('sales-month').value;
    const amount = parseFloat(document.getElementById('sales-amount').value);
    if(!month || isNaN(amount) || amount < 0) return alert('Please enter valid month and positive amount.');

    const idx = sales.findIndex(s => s.month === month);
    if(idx >= 0) {
      sales[idx].amount = amount; // update
    } else {
      sales.push({month, amount});
    }
    saveData(STORAGE_KEYS.sales, sales);
    renderSales();
    updateProfit();
    salesForm.reset();
  });

  // --- EMPLOYEES ---
  let employees = [];

  function renderEmployees() {
    employeesTableBody.innerHTML = '';
    employees.forEach(({id, name, gender, hireDate, logs}) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${name}</td>
        <td>${gender.charAt(0).toUpperCase() + gender.slice(1)}</td>
        <td>${hireDate}</td>
        <td>${logs}</td>
        <td>
          <button class="edit-btn" aria-label="Edit employee ${name}">Edit</button>
          <button class="delete-btn" aria-label="Delete employee ${name}">Delete</button>
        </td>
      `;
      const [editBtn, deleteBtn] = tr.querySelectorAll('button');
      editBtn.onclick = () => {
        document.getElementById('emp-name').value = name;
        document.getElementById('emp-gender').value = gender;
        document.getElementById('emp-hiredate').value = hireDate;
        document.getElementById('emp-logs').value = logs;
        editingEmployeeId = id;
      };
      deleteBtn.onclick = () => {
        if(confirm(`Delete employee ${name}?`)) {
          employees = employees.filter(emp => emp.id !== id);
          saveData(STORAGE_KEYS.employees, employees);
          renderEmployees();
          updatePayroll();
          updateProfit();
        }
      };
      employeesTableBody.appendChild(tr);
    });
  }

  let editingEmployeeId = null;

  employeesForm.addEventListener('submit', e => {
    e.preventDefault();
    const name = document.getElementById('emp-name').value.trim();
    const gender = document.getElementById('emp-gender').value;
    const hireDate = document.getElementById('emp-hiredate').value;
    const logs = parseInt(document.getElementById('emp-logs').value, 10);

    if(!name || !gender || !hireDate || isNaN(logs) || logs < 0) {
      return alert('Please fill in all employee fields with valid values.');
    }

    if(editingEmployeeId) {
      // Update existing employee
      const idx = employees.findIndex(e => e.id === editingEmployeeId);
      if(idx >= 0) {
        employees[idx] = {id: editingEmployeeId, name, gender, hireDate, logs};
      }
      editingEmployeeId = null;
    } else {
      // Add new employee
      employees.push({id: Date.now().toString(), name, gender, hireDate, logs});
    }
    saveData(STORAGE_KEYS.employees, employees);
    renderEmployees();
    updatePayroll();
    updateProfit();
    employeesForm.reset();
  });

  // --- EXPENSES ---
  let expenses = [];

  function renderExpenses() {
    expensesTableBody.innerHTML = '';
    expenses.sort((a,b) => b.date.localeCompare(a.date)).forEach(({id, date, amount, description}) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${date}</td>
        <td>$${formatMoney(amount)}</td>
        <td>${description}</td>
        <td>
          <button class="delete-btn" aria-label="Delete expense on ${date}">Delete</button>
        </td>
      `;
      const deleteBtn = tr.querySelector('button.delete-btn');
      deleteBtn.onclick = () => {
        if(confirm(`Delete expense on ${date}?`)) {
          expenses = expenses.filter(exp => exp.id !== id);
          saveData(STORAGE_KEYS.expenses, expenses);
          renderExpenses();
          updateProfit();
        }
      };
      expensesTableBody.appendChild(tr);
    });
  }

  expensesForm.addEventListener('submit', e => {
    e.preventDefault();
    const date = document.getElementById('expense-date').value;
    const amount = parseFloat(document.getElementById('expense-amount').value);
    const description = document.getElementById('expense-desc').value.trim();

    if(!date || isNaN(amount) || amount < 0 || !description) {
      return alert('Please fill in all expense fields with valid values.');
    }

    expenses.push({id: Date.now().toString(), date, amount, description});
    saveData(STORAGE_KEYS.expenses, expenses);
    renderExpenses();
    updateProfit();
    expensesForm.reset();
  });

  // --- PAYROLL ---
  const PAY_PER_LOG = 10; // fixed pay per work log for employees

  function updatePayroll() {
    payrollTableBody.innerHTML = '';
    let totalPayroll = 0;
    employees.forEach(({id, name, logs}) => {
      const pay = logs * PAY_PER_LOG;
      totalPayroll += pay;

      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${name}</td>
        <td>${logs}</td>
        <td>$${formatMoney(PAY_PER_LOG)}</td>
        <td>$${formatMoney(pay)}</td>
      `;
      payrollTableBody.appendChild(tr);
    });
    payrollTotalElem.textContent = `$${formatMoney(totalPayroll)}`;
    return totalPayroll;
  }

  // --- PROFIT ---
  function updateProfit() {
    const totalSales = sales.reduce((sum, s) => sum + s.amount, 0);
    const totalExpenses = expenses.reduce((sum, e) => sum + e.amount, 0);
    const totalPayroll = updatePayroll();
    const tax = totalSales * TAX_RATE;
    const netProfit = totalSales - (totalExpenses + totalPayroll + tax);

    profitGrossElem.textContent = formatMoney(totalSales);
    profitExpensesElem.textContent = formatMoney(totalExpenses);
    profitPayrollElem.textContent = formatMoney(totalPayroll);
    profitTaxElem.textContent = formatMoney(tax);
    profitNetElem.textContent = formatMoney(netProfit);
  }

  // Load all data from localStorage on dashboard show
  function loadAllData() {
    sales = loadData(STORAGE_KEYS.sales);
    employees = loadData(STORAGE_KEYS.employees);
    expenses = loadData(STORAGE_KEYS.expenses);

    renderSales();
    renderEmployees();
    renderExpenses();
  }

  // Initialize app on page load
  checkLogin();
})();
</script>

</body>
</html>










