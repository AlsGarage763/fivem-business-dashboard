<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Payroll & Profit Dashboard with Themes</title>
<style>
  /* CSS RESET */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--bg);
    color: var(--text);
    transition: background-color 0.5s ease, color 0.5s ease;
  }

  :root {
    /* Light Theme */
    --bg-light: #f5f7fa;
    --card-bg-light: #ffffff;
    --text-light: #222222;
    --accent-light: #2e8b57;

    /* Dark Theme */
    --bg-dark: #121212;
    --card-bg-dark: #1e1e1e;
    --text-dark: #e1e1e1;
    --accent-dark: #5dbbff;

    /* Warm Theme (Custom) */
    --bg-warm: #fff8f0;
    --card-bg-warm: #fff0e5;
    --text-warm: #5a2e00;
    --accent-warm: #ff7043;
  }

  /* Default theme variables (light) */
  :root {
    --bg: var(--bg-light);
    --card-bg: var(--card-bg-light);
    --text: var(--text-light);
    --accent: var(--accent-light);
  }

  /* Dark theme class */
  body.dark-theme {
    --bg: var(--bg-dark);
    --card-bg: var(--card-bg-dark);
    --text: var(--text-dark);
    --accent: var(--accent-dark);
  }

  /* Warm theme class */
  body.warm-theme {
    --bg: var(--bg-warm);
    --card-bg: var(--card-bg-warm);
    --text: var(--text-warm);
    --accent: var(--accent-warm);
  }

  /* Container */
  .container {
    max-width: 1100px;
    margin: 2rem auto 4rem;
    padding: 0 1rem;
  }

  /* Header & Theme Selector */
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    opacity: 0;
    animation: fadeIn 1s forwards;
  }

  header h1 {
    font-weight: 700;
    font-size: 2rem;
  }

  .theme-selector {
    display: flex;
    gap: 0.75rem;
    align-items: center;
    font-weight: 600;
  }

  .theme-selector label {
    cursor: pointer;
    user-select: none;
    transition: color 0.3s ease;
  }

  .theme-selector input[type="radio"] {
    display: none;
  }

  .theme-selector label span {
    display: inline-block;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 2px solid var(--accent);
    transition: background-color 0.4s ease;
  }

  /* Color dots for themes */
  label[for="theme-light"] span {
    background: var(--accent-light);
  }
  label[for="theme-dark"] span {
    background: var(--accent-dark);
  }
  label[for="theme-warm"] span {
    background: var(--accent-warm);
  }

  /* Selected theme indicator */
  .theme-selector input[type="radio"]:checked + label span {
    box-shadow: 0 0 0 4px var(--accent);
  }

  /* Card style */
  .card {
    background-color: var(--card-bg);
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    padding: 1.5rem 2rem;
    margin-bottom: 2rem;
    opacity: 0;
    transform: translateY(30px);
    animation: fadeUp 0.8s forwards;
  }
  .card:nth-child(2) {
    animation-delay: 0.1s;
  }
  .card:nth-child(3) {
    animation-delay: 0.2s;
  }
  .card:nth-child(4) {
    animation-delay: 0.3s;
  }

  /* Tabs */
  .tabs {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
  }
  .tab {
    background: transparent;
    border: none;
    padding: 0.6rem 1.2rem;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    color: var(--text);
    border-bottom: 3px solid transparent;
    transition: border-color 0.3s ease, color 0.3s ease;
    user-select: none;
  }
  .tab[aria-selected="true"] {
    border-bottom-color: var(--accent);
    color: var(--accent);
  }
  .tab:hover:not([aria-selected="true"]) {
    color: var(--accent);
  }

  /* Tables */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
    font-size: 0.95rem;
  }

  th, td {
    padding: 0.65rem 0.75rem;
    border-bottom: 1px solid var(--accent);
    text-align: left;
  }
  th {
    font-weight: 600;
  }
  tbody tr {
    transition: background-color 0.3s ease;
  }
  tbody tr:hover {
    background-color: var(--accent);
    color: var(--card-bg);
  }

  /* Forms */
  form {
    margin-top: 1rem;
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  input, select {
    padding: 0.45rem 0.75rem;
    border-radius: 6px;
    border: 1.8px solid var(--accent);
    font-size: 0.9rem;
    transition: border-color 0.3s ease;
    background-color: var(--card-bg);
    color: var(--text);
    min-width: 130px;
  }
  input:focus, select:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 6px var(--accent);
  }

  button {
    padding: 0.55rem 1.2rem;
    background-color: var(--accent);
    border: none;
    border-radius: 8px;
    color: var(--card-bg);
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.15s ease;
  }
  button:hover {
    background-color: #248349;
    transform: scale(1.05);
  }
  button:active {
    transform: scale(0.95);
  }

  /* Delete button */
  .delete-btn {
    background: transparent;
    font-size: 1.3rem;
    line-height: 1;
    padding: 0;
    transition: color 0.3s ease;
    color: var(--accent);
  }
  .delete-btn:hover {
    color: #c0392b;
  }

  /* Payroll total and profit display */
  .summary {
    font-weight: 700;
    font-size: 1.1rem;
    margin-top: 1rem;
  }
  .summary span {
    font-weight: 900;
    color: var(--accent);
  }

  /* Tax slider */
  .tax-control {
    margin-top: 1rem;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    user-select: none;
  }
  .tax-control input[type=range] {
    -webkit-appearance: none;
    width: 150px;
    height: 6px;
    border-radius: 4px;
    background: var(--accent);
    outline: none;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .tax-control input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: var(--card-bg);
    border: 2.5px solid var(--accent);
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-top: -8px;
  }
  .tax-control input[type=range]:focus::-webkit-slider-thumb {
    background-color: var(--accent);
  }

  .tax-control label {
    font-weight: 700;
  }
  .tax-percent {
    font-weight: 900;
    color: var(--accent);
    min-width: 40px;
    text-align: center;
  }

  /* Animations */
  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }
  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Responsive */
  @media (max-width: 768px) {
    .tabs {
      flex-wrap: wrap;
    }
    form {
      flex-direction: column;
      gap: 0.8rem;
    }
    input, select {
      min-width: 100%;
    }
  }
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>Payroll & Profit Dashboard</h1>
    <fieldset class="theme-selector" aria-label="Select Color Theme">
      <legend>Theme:</legend>
      <input type="radio" name="theme" id="theme-light" value="light" checked />
      <label for="theme-light" title="Light Theme"><span></span></label>

      <input type="radio" name="theme" id="theme-dark" value="dark" />
      <label for="theme-dark" title="Dark Theme"><span></span></label>

      <input type="radio" name="theme" id="theme-warm" value="warm" />
      <label for="theme-warm" title="Warm Theme"><span></span></label>
    </fieldset>
  </header>

  <section aria-label="Navigation Tabs">
    <div role="tablist" aria-label="Dashboard Tabs" class="tabs">
      <button role="tab" id="tab-employees" aria-selected="true" aria-controls="panel-employees" class="tab">Employees</button>
      <button role="tab" id="tab-payroll" aria-selected="false" aria-controls="panel-payroll" class="tab">Payroll</button>
      <button role="tab" id="tab-profit" aria-selected="false" aria-controls="panel-profit" class="tab">Profit</button>
    </div>
  </section>

  <section id="panel-employees" role="tabpanel" tabindex="0" aria-labelledby="tab-employees" class="card" hidden>
    <h2>Employees</h2>
    <form id="employee-form" aria-label="Add new employee">
      <input type="text" id="employee-name" placeholder="Employee Name" aria-label="Employee Name" required autocomplete="off" />
      <select id="employee-position" aria-label="Position" required>
        <option value="" disabled selected>Position</option>
        <option value="Manager">Manager</option>
        <option value="Staff">Staff</option>
        <option value="Intern">Intern</option>
      </select>
      <button type="submit" aria-label="Add Employee">Add Employee</button>
    </form>

    <table aria-label="Employees List" id="employee-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Position</th>
          <th>Remove</th>
        </tr>
      </thead>
      <tbody>
        <!-- Employees inserted here -->
      </tbody>
    </table>
  </section>

  <section id="panel-payroll" role="tabpanel" tabindex="0" aria-labelledby="tab-payroll" class="card" hidden>
    <h2>Payroll</h2>
    <form id="payroll-form" aria-label="Add payroll work logs">
      <select id="payroll-employee" aria-label="Select Employee" required>
        <option value="" disabled selected>Select Employee</option>
        <!-- Options dynamically populated -->
      </select>
      <input type="number" id="work-logs" placeholder="Work Logs" aria-label="Number of Work Logs" min="1" required autocomplete="off" />
      <button type="submit" aria-label="Add Work Logs">Add Work Logs</button>
    </form>

    <table aria-label="Payroll Table" id="payroll-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Position</th>
          <th>Work Logs</th>
          <th>Payroll</th>
          <th>Remove</th>
        </tr>
      </thead>
      <tbody>
        <!-- Payroll entries inserted here -->
      </tbody>
    </table>

    <div class="summary" aria-live="polite" aria-atomic="true">
      Total Payroll: $<span id="total-payroll">0</span>
    </div>
  </section>

  <section id="panel-profit" role="tabpanel" tabindex="0" aria-labelledby="tab-profit" class="card" hidden>
    <h2>Profit Calculator</h2>
    <label for="tax-range" class="tax-control">
      <span>Tax %:</span>
      <input type="range" id="tax-range" min="0" max="100" value="0" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Tax Percentage Slider" />
      <span class="tax-percent" id="tax-percent">0%</span>
    </label>
    <div class="summary">
      <p>Profit After Tax: $<span id="profit-after-tax">0</span></p>
    </div>
  </section>
</div>

<script>
  // Select DOM elements
  const tabs = document.querySelectorAll('[role="tab"]');
  const tabPanels = {
    employees: document.getElementById('panel-employees'),
    payroll: document.getElementById('panel-payroll'),
    profit: document.getElementById('panel-profit')
  };

  // Theme selector elements
  const themeRadios = document.querySelectorAll('.theme-selector input[type="radio"]');

  // Employees DOM
  const employeeForm = document.getElementById('employee-form');
  const employeeTableBody = document.querySelector('#employee-table tbody');

  // Payroll DOM
  const payrollForm = document.getElementById('payroll-form');
  const payrollTableBody = document.querySelector('#payroll-table tbody');
  const payrollEmployeeSelect = document.getElementById('payroll-employee');
  const totalPayrollSpan = document.getElementById('total-payroll');

  // Profit DOM
  const taxRange = document.getElementById('tax-range');
  const taxPercentDisplay = document.getElementById('tax-percent');
  const profitAfterTaxDisplay = document.getElementById('profit-after-tax');

  // Data arrays
  let employees = [];
  let payrolls = [];
  let taxPercent = 0;

  // Helper: Save data to localStorage
  function saveData() {
    localStorage.setItem('employees', JSON.stringify(employees));
    localStorage.setItem('payrolls', JSON.stringify(payrolls));
    localStorage.setItem('taxPercent', taxPercent.toString());
  }

  // Helper: Load data from localStorage
  function loadData() {
    const storedEmployees = localStorage.getItem('employees');
    const storedPayrolls = localStorage.getItem('payrolls');
    const storedTax = localStorage.getItem('taxPercent');

    employees = storedEmployees ? JSON.parse(storedEmployees) : [];
    payrolls = storedPayrolls ? JSON.parse(storedPayrolls) : [];
    taxPercent = storedTax ? parseInt(storedTax, 10) : 0;
  }

  // Render employees in table & payroll dropdown
  function renderEmployees() {
    // Clear employee table and payroll select options (except default)
    employeeTableBody.innerHTML = '';
    payrollEmployeeSelect.innerHTML = '<option value="" disabled selected>Select Employee</option>';

    employees.forEach((emp, index) => {
      // Employee table row
      const tr = document.createElement('tr');

      const tdName = document.createElement('td');
      tdName.textContent = emp.name;
      tr.appendChild(tdName);

      const tdPos = document.createElement('td');
      tdPos.textContent = emp.position;
      tr.appendChild(tdPos);

      const tdRemove = document.createElement('td');
      const btnRemove = document.createElement('button');
      btnRemove.className = 'delete-btn';
      btnRemove.setAttribute('aria-label', `Remove employee ${emp.name}`);
      btnRemove.textContent = '✖';
      btnRemove.addEventListener('click', () => {
        // Remove employee & also remove any payroll entries for them
        employees.splice(index, 1);
        payrolls = payrolls.filter(p => p.name !== emp.name);
        saveData();
        renderEmployees();
        renderPayrolls();
        updateTotals();
      });
      tdRemove.appendChild(btnRemove);
      tr.appendChild(tdRemove);

      employeeTableBody.appendChild(tr);

      // Add employee option to payroll select
      const option = document.createElement('option');
      option.value = emp.name;
      option.textContent = `${emp.name} (${emp.position})`;
      payrollEmployeeSelect.appendChild(option);
    });
  }

  // Render payroll table
  function renderPayrolls() {
    payrollTableBody.innerHTML = '';
    payrolls.forEach((entry, index) => {
      const tr = document.createElement('tr');

      // Name
      const tdName = document.createElement('td');
      tdName.textContent = entry.name;
      tr.appendChild(tdName);

      // Position
      const tdPos = document.createElement('td');
      tdPos.textContent = entry.position;
      tr.appendChild(tdPos);

      // Work Logs
      const tdLogs = document.createElement('td');
      tdLogs.textContent = entry.workLogs;
      tr.appendChild(tdLogs);

      // Payroll
      const tdPayroll = document.createElement('td');
      tdPayroll.textContent = `$${entry.payroll.toFixed(2)}`;
      tr.appendChild(tdPayroll);

      // Remove button
      const tdRemove = document.createElement('td');
      const btnRemove = document.createElement('button');
      btnRemove.className = 'delete-btn';
      btnRemove.setAttribute('aria-label', `Remove payroll entry for ${entry.name}`);
      btnRemove.textContent = '✖';
      btnRemove.addEventListener('click', () => {
        payrolls.splice(index, 1);
        saveData();
        renderPayrolls();
        updateTotals();
      });
      tdRemove.appendChild(btnRemove);
      tr.appendChild(tdRemove);

      payrollTableBody.appendChild(tr);
    });
  }

  // Update totals and profit
  function updateTotals() {
    const totalPayroll = payrolls.reduce((sum, entry) => sum + entry.payroll, 0);
    totalPayrollSpan.textContent = totalPayroll.toFixed(2);

    const profit = totalPayroll * (1 - taxPercent / 100);
    profitAfterTaxDisplay.textContent = profit.toFixed(2);
  }

  // Switch tab logic
  function switchTab(selectedTab) {
    tabs.forEach(tab => {
      const isSelected = tab === selectedTab;
      tab.setAttribute('aria-selected', isSelected);
      tabPanels[tab.id.split('-')[1]].hidden = !isSelected;
    });
  }

  // Initialize - Load data, render UI
  function init() {
    loadData();

    // Initial render
    renderEmployees();
    renderPayrolls();
    updateTotals();

    // Set tax slider value & display
    taxRange.value = taxPercent;
    taxPercentDisplay.textContent = taxPercent + '%';

    // Show Employees tab initially
    switchTab(document.getElementById('tab-employees'));

    // Set theme from localStorage or default
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.body.classList.remove('dark-theme', 'warm-theme');
    if (savedTheme === 'dark') {
      document.body.classList.add('dark-theme');
      document.getElementById('theme-dark').checked = true;
    } else if (savedTheme === 'warm') {
      document.body.classList.add('warm-theme');
      document.getElementById('theme-warm').checked = true;
    } else {
      document.getElementById('theme-light').checked = true;
    }
  }

  // Handle employee form submit
  employeeForm.addEventListener('submit', e => {
    e.preventDefault();
    const nameInput = document.getElementById('employee-name');
    const positionSelect = document.getElementById('employee-position');

    const name = nameInput.value.trim();
    const position = positionSelect.value;

    if (!name || !position) return;

    // Check if employee name already exists (case insensitive)
    const exists = employees.some(emp => emp.name.toLowerCase() === name.toLowerCase());
    if (exists) {
      alert('Employee with this name already exists.');
      return;
    }

    employees.push({ name, position });
    saveData();
    renderEmployees();

    // Reset form
    employeeForm.reset();
  });

  // Handle payroll form submit
  payrollForm.addEventListener('submit', e => {
    e.preventDefault();
    const selectedName = payrollEmployeeSelect.value;
    const workLogsInput = document.getElementById('work-logs');

    const workLogs = parseInt(workLogsInput.value, 10);
    if (!selectedName || isNaN(workLogs) || workLogs < 1) return;

    // Find employee position
    const employee = employees.find(emp => emp.name === selectedName);
    if (!employee) {
      alert('Selected employee not found.');
      return;
    }

    // Payroll per log, default $1000, $1200 for John Delporte
    let payrollPerLog = 1000;
    if (employee.name.toLowerCase() === 'john delporte') {
      payrollPerLog = 1200;
    }

    // Add payroll entry
    payrolls.push({
      name: employee.name,
      position: employee.position,
      workLogs,
      payroll: payrollPerLog * workLogs
    });

    saveData();
    renderPayrolls();
    updateTotals();

    // Reset form
    payrollForm.reset();
  });

  // Handle tab clicks
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      switchTab(tab);
    });
  });

  // Tax slider change
  taxRange.addEventListener('input', () => {
    taxPercent = parseInt(taxRange.value, 10);
    taxPercentDisplay.textContent = taxPercent + '%';
    updateTotals();
    saveData();
  });

  // Theme selection
  themeRadios.forEach(radio => {
    radio.addEventListener('change', () => {
      const theme = radio.value;
      document.body.classList.remove('dark-theme', 'warm-theme');

      if (theme === 'dark') {
        document.body.classList.add('dark-theme');
      } else if (theme === 'warm') {
        document.body.classList.add('warm-theme');
      }
      localStorage.setItem('theme', theme);
    });
  });

  // Initial call
  init();
</script>
</body>
</html>
