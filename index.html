<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Business Dashboard</title>
<style>
  /* Reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0;
    background: #f4f7fa;
    color: #333;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 40px 20px;
  }

  #login, #dashboard {
    background: white;
    width: 100%;
    max-width: 900px;
    border-radius: 10px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    padding: 30px 40px 40px;
  }

  h2 {
    margin-top: 0;
    font-weight: 700;
    color: #0a3d62;
  }

  /* Login */
  #login form {
    display: flex;
    flex-direction: column;
    gap: 18px;
  }

  #login label {
    font-weight: 600;
    margin-bottom: 6px;
    color: #34495e;
  }

  #login input[type="text"],
  #login input[type="password"] {
    padding: 12px 14px;
    font-size: 1rem;
    border: 2px solid #d1d8e0;
    border-radius: 6px;
    transition: border-color 0.3s;
  }

  #login input[type="text"]:focus,
  #login input[type="password"]:focus {
    outline: none;
    border-color: #0a3d62;
    background: #f0f4f8;
  }

  #login button {
    background-color: #0a3d62;
    color: white;
    font-weight: 700;
    padding: 14px;
    border: none;
    border-radius: 7px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  #login button:hover {
    background-color: #07406a;
  }

  /* Dashboard tabs */
  .tabs {
    display: flex;
    gap: 12px;
    margin-bottom: 30px;
    border-bottom: 3px solid #e1e8f0;
  }

  .tab {
    padding: 14px 28px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    color: #34495e;
    border-radius: 6px 6px 0 0;
    background-color: #d6dbeb;
    user-select: none;
    transition: background-color 0.3s, color 0.3s;
  }

  .tab[aria-selected="true"] {
    background-color: #0a3d62;
    color: #fff;
    box-shadow: 0 -3px 0 #ffb142 inset;
  }

  .tab:focus {
    outline: 3px solid #ffb142;
    outline-offset: 3px;
  }

  /* Tab panel */
  [role="tabpanel"] {
    animation: fadeIn 0.3s ease forwards;
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(8px);}
    to {opacity: 1; transform: translateY(0);}
  }

  /* Forms inside dashboard */
  form {
    margin-bottom: 24px;
    display: flex;
    flex-wrap: wrap;
    gap: 14px 24px;
    align-items: flex-end;
  }

  label {
    font-weight: 600;
    color: #34495e;
  }

  input[type="text"], input[type="month"], input[type="number"], select {
    padding: 10px 12px;
    font-size: 1rem;
    border: 2px solid #d1d8e0;
    border-radius: 6px;
    min-width: 160px;
    transition: border-color 0.3s;
  }

  input[type="text"]:focus,
  input[type="month"]:focus,
  input[type="number"]:focus,
  select:focus {
    outline: none;
    border-color: #0a3d62;
    background: #f0f4f8;
  }

  button.add-btn {
    background-color: #0a3d62;
    color: white;
    font-weight: 700;
    padding: 12px 26px;
    border: none;
    border-radius: 7px;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  button.add-btn:hover {
    background-color: #07406a;
  }

  /* Tables */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(0,0,0,0.05);
  }

  th, td {
    padding: 14px 18px;
    text-align: left;
    font-size: 0.95rem;
    border-bottom: 1px solid #e1e8f0;
    color: #3a4750;
  }

  th {
    background-color: #d6dbeb;
    font-weight: 700;
    user-select: none;
  }

  tr:last-child td {
    border-bottom: none;
  }

  /* Delete buttons */
  .delete-btn {
    background: #ff6b6b;
    border: none;
    color: white;
    padding: 6px 12px;
    font-weight: 600;
    font-size: 0.85rem;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  .delete-btn:hover {
    background: #e24343;
  }

  /* Profit section */
  .profit-summary {
    background: #eaf0f8;
    padding: 20px 30px;
    border-radius: 10px;
    box-shadow: inset 0 0 10px #b6c1d1;
    max-width: 420px;
  }

  .profit-summary div {
    margin-bottom: 14px;
    font-size: 1.1rem;
    font-weight: 600;
    color: #1b2838;
  }

  .profit-summary div span {
    float: right;
    font-weight: 700;
    color: #0a3d62;
  }

  /* Tax input */
  #tax-container {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-top: 8px;
  }

  #tax {
    width: 70px;
    font-weight: 700;
    font-size: 1.1rem;
    text-align: center;
    border: 2px solid #d1d8e0;
    border-radius: 6px;
    padding: 8px 10px;
    transition: border-color 0.3s;
  }

  #tax:focus {
    outline: none;
    border-color: #0a3d62;
    background: #f0f4f8;
  }

  #tax-display {
    font-weight: 700;
    font-size: 1.1rem;
    color: #0a3d62;
  }

  /* Responsive */
  @media (max-width: 700px) {
    form {
      flex-direction: column;
      gap: 14px;
    }

    input[type="text"], input[type="month"], input[type="number"], select {
      min-width: 100%;
    }

    .profit-summary {
      max-width: 100%;
    }
  }
</style>
</head>
<body>

<div id="login" role="main" aria-label="Login section">
  <h2>Login</h2>
  <form aria-describedby="login-instructions">
    <p id="login-instructions" style="color:#666;">Enter your username and password to access the dashboard.</p>
    <label for="username">Username</label>
    <input id="username" type="text" autocomplete="username" required aria-required="true" />
    <label for="password">Password</label>
    <input id="password" type="password" autocomplete="current-password" required aria-required="true" />
    <button type="submit" aria-label="Login">Login</button>
  </form>
</div>

<div id="dashboard" hidden>
  <div class="tabs" role="tablist" aria-label="Main dashboard tabs">
    <button class="tab" role="tab" aria-selected="true" aria-controls="sales-tab" id="sales-tab-btn" tabindex="0">Sales</button>
    <button class="tab" role="tab" aria-selected="false" aria-controls="employees-tab" id="employees-tab-btn" tabindex="-1">Employees</button>
    <button class="tab" role="tab" aria-selected="false" aria-controls="payroll-tab" id="payroll-tab-btn" tabindex="-1">Payroll</button>
    <button class="tab" role="tab" aria-selected="false" aria-controls="expenses-tab" id="expenses-tab-btn" tabindex="-1">Expenses</button>
    <button class="tab" role="tab" aria-selected="false" aria-controls="profit-tab" id="profit-tab-btn" tabindex="-1">Profit</button>
  </div>

  <section id="sales-tab" role="tabpanel" aria-labelledby="sales-tab-btn">
    <h2>Sales</h2>
    <form id="sales-form" aria-label="Add sales data">
      <label for="sale-month">Month</label>
      <input id="sale-month" type="month" required />
      <label for="sale-amount">Amount</label>
      <input id="sale-amount" type="number" min="0" step="0.01" required />
      <button type="submit" class="add-btn">Add Sale</button>
    </form>
    <table aria-label="Sales records">
      <thead>
        <tr><th>Month</th><th>Amount</th><th>Actions</th></tr>
      </thead>
      <tbody id="sales-table-body"></tbody>
    </table>
  </section>

  <section id="employees-tab" role="tabpanel" aria-labelledby="employees-tab-btn" hidden>
    <h2>Employees</h2>
    <form id="employees-form" aria-label="Add employee data">
      <label for="employee-name">Name</label>
      <input id="employee-name" type="text" required />
      <label for="employee-hire-date">Hire Date</label>
      <input id="employee-hire-date" type="month" required />
      <label for="employee-gender">Gender</label>
      <select id="employee-gender" required>
        <option value="" disabled selected>Select gender</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
        <option>Prefer not to say</option>
      </select>
      <label for="employee-logs">Logs</label>
      <input id="employee-logs" type="number" min="0" required />
      <button type="submit" class="add-btn">Add Employee</button>
    </form>
    <table aria-label="Employee records">
      <thead>
        <tr><th>Name</th><th>Hire Date</th><th>Gender</th><th>Logs</th><th>Actions</th></tr>
      </thead>
      <tbody id="employees-table-body"></tbody>
    </table>
  </section>

  <section id="payroll-tab" role="tabpanel" aria-labelledby="payroll-tab-btn" hidden>
    <h2>Payroll</h2>
    <table aria-label="Payroll details">
      <thead>
        <tr><th>Name</th><th>Logs</th><th>Pay Per Log</th><th>Total Pay</th></tr>
      </thead>
      <tbody id="payroll-table-body"></tbody>
      <tfoot>
        <tr>
          <th colspan="3" style="text-align:right; padding-right: 16px;">Total Payroll:</th>
          <th id="payroll-total-display"></th>
        </tr>
      </tfoot>
    </table>
  </section>

  <section id="expenses-tab" role="tabpanel" aria-labelledby="expenses-tab-btn" hidden>
    <h2>Expenses</h2>
    <form id="expenses-form" aria-label="Add expense data">
      <label for="expense-month">Month</label>
      <input id="expense-month" type="month" required />
      <label for="expense-amount">Amount</label>
      <input id="expense-amount" type="number" min="0" step="0.01" required />
      <button type="submit" class="add-btn">Add Expense</button>
    </form>
    <table aria-label="Expenses records">
      <thead>
        <tr><th>Month</th><th>Amount</th><th>Actions</th></tr>
      </thead>
      <tbody id="expenses-table-body"></tbody>
    </table>
  </section>

  <section id="profit-tab" role="tabpanel" aria-labelledby="profit-tab-btn" hidden>
    <h2>Profit</h2>
    <div class="profit-summary" aria-live="polite" aria-atomic="true">
      <div>Total Sales: <span id="total-sales-display">0.00</span></div>
      <div>Total Payroll: <span id="total-payroll-display">0.00</span></div>
      <div>Total Expenses: <span id="total-expenses-display">0.00</span></div>
      <div>
        Tax Rate:
        <div id="tax-container">
          <input id="tax" type="number" min="0" max="100" step="1" value="30" aria-label="Tax percentage" />
          <span id="tax-display">30%</span>
        </div>
      </div>
      <div>Profit After Tax: <span id="profit-after-tax-display">0.00</span></div>
    </div>
  </section>
</div>

<script>
(() => {
  // Elements
  const login = document.getElementById('login');
  const dashboard = document.getElementById('dashboard');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');

  // Tabs
  const tabs = Array.from(dashboard.querySelectorAll('.tab'));
  const panels = {
    sales: document.getElementById('sales-tab'),
    employees: document.getElementById('employees-tab'),
    payroll: document.getElementById('payroll-tab'),
    expenses: document.getElementById('expenses-tab'),
    profit: document.getElementById('profit-tab'),
  };

  // Sales
  const salesForm = document.getElementById('sales-form');
  const saleMonthInput = document.getElementById('sale-month');
  const saleAmountInput = document.getElementById('sale-amount');
  const salesTableBody = document.getElementById('sales-table-body');

  // Employees
  const employeesForm = document.getElementById('employees-form');
  const employeeNameInput = document.getElementById('employee-name');
  const employeeHireDateInput = document.getElementById('employee-hire-date');
  const employeeGenderInput = document.getElementById('employee-gender');
  const employeeLogsInput = document.getElementById('employee-logs');
  const employeesTableBody = document.getElementById('employees-table-body');

  // Payroll
  const payrollTableBody = document.getElementById('payroll-table-body');
  const payrollTotalDisplay = document.getElementById('payroll-total-display');

  // Expenses
  const expensesForm = document.getElementById('expenses-form');
  const expenseMonthInput = document.getElementById('expense-month');
  const expenseAmountInput = document.getElementById('expense-amount');
  const expensesTableBody = document.getElementById('expenses-table-body');

  // Profit
  const taxInput = document.getElementById('tax');
  const taxDisplay = document.getElementById('tax-display');
  const totalSalesDisplay = document.getElementById('total-sales-display');
  const totalPayrollDisplay = document.getElementById('total-payroll-display');
  const totalExpensesDisplay = document.getElementById('total-expenses-display');
  const profitAfterTaxDisplay = document.getElementById('profit-after-tax-display');

  // Storage keys
  const SALES_KEY = 'dashboard-sales';
  const EMPLOYEES_KEY = 'dashboard-employees';
  const EXPENSES_KEY = 'dashboard-expenses';
  const TAX_KEY = 'dashboard-tax';

  // Data stores
  let sales = [];
  let employees = [];
  let expenses = [];
  let taxPercent = 30;

  // Utility
  function formatCurrency(num) {
    return num.toLocaleString(undefined, { style: 'currency', currency: 'USD', minimumFractionDigits: 2 });
  }

  // LocalStorage helpers
  function saveToStorage(key, data) {
    localStorage.setItem(key, JSON.stringify(data));
  }
  function loadFromStorage(key) {
    const val = localStorage.getItem(key);
    if (!val) return [];
    try {
      return JSON.parse(val);
    } catch {
      return [];
    }
  }

  // Login logic
  login.querySelector('form').addEventListener('submit', e => {
    e.preventDefault();
    const user = usernameInput.value.trim();
    const pass = passwordInput.value;
    if (user === 'admin' && pass === "Al'sOwners123") {
      login.hidden = true;
      dashboard.hidden = false;
      initDashboard();
      tabs[0].focus();
    } else {
      alert('Incorrect username or password.');
    }
  });

  // Tabs
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      activateTab(tab.id.replace('-btn',''));
    });
    tab.addEventListener('keydown', e => {
      let idx = tabs.indexOf(e.target);
      if (e.key === 'ArrowRight') {
        e.preventDefault();
        const next = tabs[(idx + 1) % tabs.length];
        next.focus();
        activateTab(next.id.replace('-btn',''));
      } else if (e.key === 'ArrowLeft') {
        e.preventDefault();
        const prev = tabs[(idx - 1 + tabs.length) % tabs.length];
        prev.focus();
        activateTab(prev.id.replace('-btn',''));
      }
    });
  });

  function activateTab(name) {
    tabs.forEach(t => {
      const selected = t.id === name + '-btn';
      t.setAttribute('aria-selected', selected);
      t.tabIndex = selected ? 0 : -1;
      panels[name].hidden = !selected;
    });
    updatePayroll(); // update payroll whenever tabs switch (to keep fresh)
    updateProfit();
  }

  // SALES
  function renderSales() {
    salesTableBody.innerHTML = '';
    sales.forEach(({month, amount}, i) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${month}</td>
        <td>${formatCurrency(amount)}</td>
        <td><button class="delete-btn" aria-label="Delete sale for ${month}">${'🗑️'}</button></td>
      `;
      tr.querySelector('button').addEventListener('click', () => {
        sales.splice(i,1);
        saveToStorage(SALES_KEY, sales);
        renderSales();
        updateProfit();
      });
      salesTableBody.appendChild(tr);
    });
  }
  salesForm.addEventListener('submit', e => {
    e.preventDefault();
    const month = saleMonthInput.value;
    const amount = parseFloat(saleAmountInput.value);
    if (!month || isNaN(amount) || amount < 0) {
      alert('Please enter valid sales data.');
      return;
    }
    sales.push({month, amount});
    sales.sort((a,b) => a.month.localeCompare(b.month));
    saveToStorage(SALES_KEY, sales);
    renderSales();
    saleMonthInput.value = '';
    saleAmountInput.value = '';
    updateProfit();
  });

  // EMPLOYEES
  function renderEmployees() {
    employeesTableBody.innerHTML = '';
    employees.forEach(({name, hireDate, gender, logs}, i) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${name}</td>
        <td>${hireDate}</td>
        <td>${gender}</td>
        <td>${logs}</td>
        <td><button class="delete-btn" aria-label="Delete employee ${name}">${'🗑️'}</button></td>
      `;
      tr.querySelector('button').addEventListener('click', () => {
        employees.splice(i,1);
        saveToStorage(EMPLOYEES_KEY, employees);
        renderEmployees();
        updatePayroll();
        updateProfit();
      });
      employeesTableBody.appendChild(tr);
    });
  }
  employeesForm.addEventListener('submit', e => {
    e.preventDefault();
    const name = employeeNameInput.value.trim();
    const hireDate = employeeHireDateInput.value;
    const gender = employeeGenderInput.value;
    const logs = parseInt(employeeLogsInput.value);
    if (!name || !hireDate || !gender || isNaN(logs) || logs < 0) {
      alert('Please enter valid employee data.');
      return;
    }
    employees.push({name, hireDate, gender, logs});
    employees.sort((a,b) => a.name.localeCompare(b.name));
    saveToStorage(EMPLOYEES_KEY, employees);
    renderEmployees();
    employeeNameInput.value = '';
    employeeHireDateInput.value = '';
    employeeGenderInput.value = '';
    employeeLogsInput.value = '';
    updatePayroll();
    updateProfit();
  });

  // PAYROLL
  function updatePayroll() {
    payrollTableBody.innerHTML = '';
    let totalPayroll = 0;
    employees.forEach(({name, logs}) => {
      const payPerLog = 10;
      const totalPay = logs * payPerLog;
      totalPayroll += totalPay;
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${name}</td>
        <td>${logs}</td>
        <td>${formatCurrency(payPerLog)}</td>
        <td>${formatCurrency(totalPay)}</td>
      `;
      payrollTableBody.appendChild(tr);
    });
    payrollTotalDisplay.textContent = formatCurrency(totalPayroll);
  }

  // EXPENSES
  function renderExpenses() {
    expensesTableBody.innerHTML = '';
    expenses.forEach(({month, amount}, i) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${month}</td>
        <td>${formatCurrency(amount)}</td>
        <td><button class="delete-btn" aria-label="Delete expense for ${month}">${'🗑️'}</button></td>
      `;
      tr.querySelector('button').addEventListener('click', () => {
        expenses.splice(i,1);
        saveToStorage(EXPENSES_KEY, expenses);
        renderExpenses();
        updateProfit();
      });
      expensesTableBody.appendChild(tr);
    });
  }
  expensesForm.addEventListener('submit', e => {
    e.preventDefault();
    const month = expenseMonthInput.value;
    const amount = parseFloat(expenseAmountInput.value);
    if (!month || isNaN(amount) || amount < 0) {
      alert('Please enter valid expense data.');
      return;
    }
    expenses.push({month, amount});
    expenses.sort((a,b) => a.month.localeCompare(b.month));
    saveToStorage(EXPENSES_KEY, expenses);
    renderExpenses();
    expenseMonthInput.value = '';
    expenseAmountInput.value = '';
    updateProfit();
  });

  // PROFIT
  function updateProfit() {
    const totalSales = sales.reduce((acc, s) => acc + s.amount, 0);
    const totalPayroll = employees.reduce((acc, e) => acc + e.logs * 10, 0);
    const totalExpenses = expenses.reduce((acc, e) => acc + e.amount, 0);
    const taxRate = taxPercent / 100;
    const profitBeforeTax = totalSales - totalPayroll - totalExpenses;
    const profitAfterTax = profitBeforeTax * (1 - taxRate);

    totalSalesDisplay.textContent = formatCurrency(totalSales);
    totalPayrollDisplay.textContent = formatCurrency(totalPayroll);
    totalExpensesDisplay.textContent = formatCurrency(totalExpenses);
    profitAfterTaxDisplay.textContent = formatCurrency(profitAfterTax);
  }

  // Tax input
  taxInput.addEventListener('input', e => {
    let val = parseInt(e.target.value);
    if (isNaN(val) || val < 0) val = 0;
    else if (val > 100) val = 100;
    taxPercent = val;
    e.target.value = val;
    taxDisplay.textContent = val + '%';
    localStorage.setItem(TAX_KEY, val);
    updateProfit();
  });

  // Initialize dashboard
  function initDashboard() {
    // Load saved data
    sales = loadFromStorage(SALES_KEY);
    employees = loadFromStorage(EMPLOYEES_KEY);
    expenses = loadFromStorage(EXPENSES_KEY);
    taxPercent = parseInt(localStorage.getItem(TAX_KEY)) || 30;
    taxInput.value = taxPercent;
    taxDisplay.textContent = taxPercent + '%';

    // Render data
    renderSales();
    renderEmployees();
    renderExpenses();
    updatePayroll();
    updateProfit();

    activateTab('sales');
  }

})();
</script>

</body>
</html>
