<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Business Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background: #f9f9f9;
      color: #333;
    }
    header {
      background: #222;
      color: white;
      padding: 10px 20px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }
    nav {
      background: #444;
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 10px 0;
    }
    nav button {
      background: #666;
      border: none;
      padding: 10px 15px;
      color: white;
      cursor: pointer;
      font-size: 16px;
    }
    nav button.active, nav button:hover {
      background: #222;
    }
    main {
      padding: 20px;
      max-width: 700px;
      margin: auto;
      background: white;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    section {
      display: none;
    }
    section.active {
      display: block;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      box-sizing: border-box;
    }
    button.action-btn {
      margin-top: 20px;
      padding: 10px 15px;
      background: #222;
      color: white;
      border: none;
      cursor: pointer;
    }
    button.action-btn:hover {
      background: #555;
    }
    .log-list {
      margin-top: 15px;
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid #ddd;
      padding: 10px;
      background: #fafafa;
    }
    .log-list p {
      margin: 5px 0;
      font-size: 14px;
    }
    .reset-btn {
      margin-top: 10px;
      background: #a00;
      padding: 7px 12px;
      font-size: 14px;
      border: none;
      color: white;
      cursor: pointer;
    }
    .reset-btn:hover {
      background: #c33;
    }
  </style>
</head>
<body>

<header>Business Dashboard</header>

<nav>
  <button id="nav-sales" class="active">Sales</button>
  <button id="nav-payroll">Payroll</button>
  <button id="nav-profit">Profit</button>
  <button id="nav-expenses">Expenses</button>
</nav>

<main>
  <!-- SALES -->
  <section id="sales-section" class="active">
    <h2>Sales Log</h2>
    <label for="sales-date">Date</label>
    <input type="date" id="sales-date" />
    <label for="sales-gross">Gross Sales ($)</label>
    <input type="number" id="sales-gross" min="0" step="0.01" placeholder="Enter gross sales" />
    <label for="sales-tax">Tax Rate (%)</label>
    <input type="number" id="sales-tax" min="0" max="100" step="0.01" placeholder="Enter tax rate" />
    <button id="add-sale-btn" class="action-btn">Add Sale Record</button>

    <div class="log-list" id="sales-log-list">
      <h4>Sales Records</h4>
    </div>
    <button id="reset-sales" class="reset-btn">Reset Sales Records</button>
  </section>

  <!-- PAYROLL -->
  <section id="payroll-section">
    <h2>Employee Payroll</h2>
    <label for="payroll-date">Date</label>
    <input type="date" id="payroll-date" />
    <label for="employee-select">Employee</label>
    <select id="employee-select">
      <option value="Cuddy Haze">Cuddy Haze</option>
      <option value="Dante Vincenzo">Dante Vincenzo</option>
    </select>
    <label for="logs-worked">Logs Worked</label>
    <input type="number" id="logs-worked" min="0" placeholder="Enter logs worked" />
    <button id="add-payroll-btn" class="action-btn">Add Payroll Record</button>

    <div class="log-list" id="payroll-log-list">
      <h4>Payroll Records</h4>
    </div>
    <button id="reset-payroll" class="reset-btn">Reset Payroll Records</button>
  </section>

  <!-- PROFIT -->
  <section id="profit-section">
    <h2>Business Profit</h2>
    <button id="calculate-profit-btn" class="action-btn">Calculate Profit</button>
    <div id="profit-result" style="margin-top: 15px; font-weight: bold;"></div>
    <div class="log-list" id="profit-log-list">
      <h4>Profit History</h4>
    </div>
    <button id="reset-profit" class="reset-btn">Reset Profit Records</button>
  </section>

  <!-- EXPENSES -->
  <section id="expenses-section">
    <h2>Expenses</h2>
    <label for="expense-date">Date</label>
    <input type="date" id="expense-date" />
    <label for="expense-category">Category</label>
    <input type="text" id="expense-category" placeholder="E.g. materials, rent, utilities" />
    <label for="expense-amount">Amount ($)</label>
    <input type="number" id="expense-amount" min="0" step="0.01" placeholder="Enter amount spent" />
    <button id="add-expense-btn" class="action-btn">Add Expense Record</button>

    <div class="log-list" id="expense-log-list">
      <h4>Expense Records</h4>
    </div>
    <button id="reset-expenses" class="reset-btn">Reset Expense Records</button>
  </section>
</main>

<script>
  const PAY_PER_LOG = 500;

  // Helper localStorage functions
  function getLocalData(key) {
    return JSON.parse(localStorage.getItem(key)) || [];
  }
  function setLocalData(key, data) {
    localStorage.setItem(key, JSON.stringify(data));
  }

  // NAVIGATION
  const navButtons = {
    sales: document.getElementById('nav-sales'),
    payroll: document.getElementById('nav-payroll'),
    profit: document.getElementById('nav-profit'),
    expenses: document.getElementById('nav-expenses')
  };
  const sections = {
    sales: document.getElementById('sales-section'),
    payroll: document.getElementById('payroll-section'),
    profit: document.getElementById('profit-section'),
    expenses: document.getElementById('expenses-section')
  };

  Object.keys(navButtons).forEach(key => {
    navButtons[key].addEventListener('click', () => {
      Object.values(navButtons).forEach(btn => btn.classList.remove('active'));
      navButtons[key].classList.add('active');

      Object.values(sections).forEach(sec => sec.classList.remove('active'));
      sections[key].classList.add('active');
    });
  });

  // --- SALES LOG ---
  const salesDateInput = document.getElementById('sales-date');
  const salesGrossInput = document.getElementById('sales-gross');
  const salesTaxInput = document.getElementById('sales-tax');
  const addSaleBtn = document.getElementById('add-sale-btn');
  const salesLogList = document.getElementById('sales-log-list');
  const resetSalesBtn = document.getElementById('reset-sales');

  addSaleBtn.onclick = () => {
    const date = salesDateInput.value;
    const gross = parseFloat(salesGrossInput.value);
    const taxRate = parseFloat(salesTaxInput.value);
    if (!date || isNaN(gross) || gross < 0 || isNaN(taxRate) || taxRate < 0 || taxRate > 100) {
      alert('Please enter valid date, gross sales, and tax rate (0-100).');
      return;
    }
    const sales = getLocalData('salesLogs');
    sales.push({ date, gross, taxRate });
    setLocalData('salesLogs', sales);
    salesDateInput.value = '';
    salesGrossInput.value = '';
    salesTaxInput.value = '';
    renderSalesLogs();
  };

  function renderSalesLogs() {
    const sales = getLocalData('salesLogs');
    salesLogList.innerHTML = '<h4>Sales Records</h4>';
    if (sales.length === 0) {
      salesLogList.innerHTML += '<p>No sales records yet.</p>';
      return;
    }
    sales.sort((a,b) => b.date.localeCompare(a.date));
    sales.forEach(sale => {
      const net = sale.gross * (1 - sale.taxRate / 100);
      salesLogList.innerHTML += `<p><strong>${sale.date}</strong> - Gross: $${sale.gross.toFixed(2)}, Tax: ${sale.taxRate}%, Net: $${net.toFixed(2)}</p>`;
    });
  }

  resetSalesBtn.onclick = () => {
    if (confirm('Are you sure you want to reset all sales records?')) {
      localStorage.removeItem('salesLogs');
      renderSalesLogs();
    }
  };

  // --- EMPLOYEE PAYROLL ---
  const payrollDateInput = document.getElementById('payroll-date');
  const employeeSelect = document.getElementById('employee-select');
  const logsWorkedInput = document.getElementById('logs-worked');
  const addPayrollBtn = document.getElementById('add-payroll-btn');
  const payrollLogList = document.getElementById('payroll-log-list');
  const resetPayrollBtn = document.getElementById('reset-payroll');

  addPayrollBtn.onclick = () => {
    const date = payrollDateInput.value;
    const employeeName = employeeSelect.value;
    const logs = parseInt(logsWorkedInput.value, 10);
    if (!date || !employeeName || isNaN(logs) || logs < 0) {
      alert('Please enter valid date, select employee, and enter logs worked.');
      return;
    }
    const payrolls = getLocalData('payrollLogs');
    payrolls.push({ date, employee: employeeName, logs });
    setLocalData('payrollLogs', payrolls);
    payrollDateInput.value = '';
    logsWorkedInput.value = '';
    renderPayrollLogs();
  };

  function renderPayrollLogs() {
    const payrolls = getLocalData('payrollLogs');
    payrollLogList.innerHTML = '<h4>Payroll Records</h4>';
    if (payrolls.length === 0) {
      payrollLogList.innerHTML += '<p>No payroll records yet.</p>';
      return;
    }
    payrolls.sort((a,b) => b.date.localeCompare(a.date));
    payrolls.forEach(p => {
      payrollLogList.innerHTML += `<p><strong>${p.date}</strong> - ${p.employee} worked ${p.logs} logs ($${(p.logs * PAY_PER_LOG).toFixed(2)})</p>`;
    });
  }

  resetPayrollBtn.onclick = () => {
    if (confirm('Are you sure you want to reset all payroll records?')) {
      localStorage.removeItem('payrollLogs');
      renderPayrollLogs();
    }
  };

  // --- EXPENSES ---
  const expenseDateInput = document.getElementById('expense-date');
  const expenseCategoryInput = document.getElementById('expense-category');
  const expenseAmountInput = document.getElementById('expense-amount');
  const addExpenseBtn = document.getElementById('add-expense-btn');
  const expenseLogList = document.getElementById('expense-log-list');
  const resetExpensesBtn = document.getElementById('reset-expenses');

  addExpenseBtn.onclick = () => {
    const date = expenseDateInput.value;
    const category = expenseCategoryInput.value.trim();
    const amount = parseFloat(expenseAmountInput.value);
    if (!date || !category || isNaN(amount) || amount < 0) {
      alert('Please enter valid date, category, and amount.');
      return;
    }
    const expenses = getLocalData('expenseLogs');
    expenses.push({ date, category, amount });
    setLocalData('expenseLogs', expenses);
    expenseDateInput.value = '';
    expenseCategoryInput.value = '';
    expenseAmountInput.value = '';
    renderExpenseLogs();
  };

  function renderExpenseLogs() {
    const expenses = getLocalData('expenseLogs');
    expenseLogList.innerHTML = '<h4>Expense Records</h4>';
    if (expenses.length === 0) {
      expenseLogList.innerHTML += '<p>No expense records yet.</p>';
      return;
    }
    expenses.sort((a,b) => b.date.localeCompare(a.date));
    expenses.forEach(e => {
      expenseLogList.innerHTML += `<p><strong>${e.date}</strong> - ${e.category}: $${e.amount.toFixed(2)}</p>`;
    });
  }

  resetExpensesBtn.onclick = () => {
    if (confirm('Are you sure you want to reset all expense records?')) {
      localStorage.removeItem('expenseLogs');
      renderExpenseLogs();
    }
  };

  // --- BUSINESS PROFIT ---
  const calculateProfitBtn = document.getElementById('calculate-profit-btn');
  const profitResult = document.getElementById('profit-result');
  const profitLogList = document.getElementById('profit-log-list');
  const resetProfitBtn = document.getElementById('reset-profit');

  function calculateBusinessProfit() {
    const sales = getLocalData('salesLogs');
    const payrolls = getLocalData('payrollLogs');
    const expenses = getLocalData('expenseLogs');

    if (sales.length === 0) {
      alert('No sales records to calculate profit.');
      return;
    }

    // Sum net sales after taxes
    let totalNetProfit = 0;
    sales.forEach(sale => {
      const net = sale.gross * (1 - sale.taxRate / 100);
      totalNetProfit += net;
    });

    // Sum total salary owed
    let totalSalary = 0;
    payrolls.forEach(payroll => {
      totalSalary += payroll.logs * PAY_PER_LOG;
    });

    // Sum total expenses (all expenses)
    let totalExpenses = 0;
    expenses.forEach(exp => {
      totalExpenses += exp.amount;
    });

    // Calculate final business profit
    const finalProfit = totalNetProfit - totalSalary - totalExpenses;

    // Save profit record with today's date
    const today = new Date().toISOString().split('T')[0];
    const profitHistory = getLocalData('profitHistory');
    profitHistory.push({ date: today, netProfit: totalNetProfit, totalSalary, totalExpenses, finalProfit });
    setLocalData('profitHistory', profitHistory);

    // Display results
    profitResult.innerHTML = `
      Total Net Profit (after taxes): $${totalNetProfit.toFixed(2)}<br>
      Total Salary Owed: $${totalSalary.toFixed(2)}<br>
      Total Expenses: $${totalExpenses.toFixed(2)}<br>
      <strong>Final Business Profit:</strong> $${finalProfit.toFixed(2)}
    `;

    renderProfitLogs();
  }

  function renderProfitLogs() {
    const profits = getLocalData('profitHistory');
    profitLogList.innerHTML = '<h4>Profit History</h4>';
    if (profits.length === 0) {
      profitLogList.innerHTML += '<p>No profit records yet.</p>';
      return;
    }
    profits.sort((a,b) => b.date.localeCompare(a.date));
    profits.forEach(p => {
      profitLogList.innerHTML += `<p><strong>${p.date}</strong> — Net Profit: $${p.netProfit.toFixed(2)}, Salary: $${p.totalSalary.toFixed(2)}, Expenses: $${p.totalExpenses.toFixed(2)}, Final: $${p.finalProfit.toFixed(2)}</p>`;
    });
  }

  calculateProfitBtn.onclick = calculateBusinessProfit;

  resetProfitBtn.onclick = () => {
    if (confirm('Are you sure you want to reset all profit records?')) {
      localStorage.removeItem('profitHistory');
      profitResult.innerHTML = '';
      renderProfitLogs();
    }
  };

  // INITIAL RENDERS
  renderSalesLogs();
  renderPayrollLogs();
  renderExpenseLogs();
  renderProfitLogs();
</script>

</body>
</html>








